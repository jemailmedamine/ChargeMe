<h1>Users </h1>
<div class="from-outline mt-3">
  <form>
   
    <input class="form-control" [(ngModel)]="login" list="datalistOptions" id="exampleDataList" name="exampleDataList" placeholder="Type to search..."
    style="width: 300px;height: 35px;border-radius: 50px;">
    
    <button type="button" (click)="filrage()" class="btn btn-outline" style="height: 35px; border-radius: 50px;background-color: rgba(65.66, 187.93, 35.10, 0.50);">
      <i class="fa fa-filter" aria-hidden="true"></i> filter
    </button> 
    <!-- <button type="button" class="btn btn-outline-create" routerLink="/create" style="border-radius: 50px;height: 35px;">
      <i class="fa fa-plus" aria-hidden="true"></i>create
    </button> -->
  </form>
</div>


<div class="table">
<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">phone number</th>
      <th scope="col">email</th>
      <th scope="col">Action</th>
      <th scope="col">Status</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let client of allclient.clients">
      <td>{{client.firstname}} {{client.lastname}}</td>
      <td>{{client.phone}}</td>
      <ng-container *ngIf="client?.loginType === 'N'; else noLogin">
        <td>{{ client?.login }}</td>
      </ng-container>
      <ng-template #noLogin> 
        <td>{{ client?.email }}</td>
      </ng-template>
      <!-- <td>{{client.email}}</td> -->
      
      <td>
        <!-- <button class="btn fa fa-pencil" (click)="editClient(client)"></button> -->
        <i class="fa fa-trash" aria-hidden="true" (click)="openDeletePopup(client.id)" openDeletePopup style="padding: 5px; color: grey;"></i>
      </td>
      <td>
        <div class="form-check form-switch">
          <input type="checkbox" class="form-check-input" [id]="'flexSwitchCheckDefault_' + client.id" (click)="toggleBlocked(client)" [(ngModel)]="client.BlackList">
          <label class="form-check-label" [for]="'flexSwitchCheckDefault_' + client.id">{{ client.BlackList ? 'blocked' : 'unblocked' }}</label>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
</div>
<nav aria-label="Page navigation example">
  <ul class="pagination justify-content-end" >
    <li class="page-item ">
     <!--<a class="page-link">Previous</a>-->
     <button class="page-link" (click)="Previous()">Previous</button>
    </li >
    <!--<li class="page-item"><a class="page-link" href="#">1</a></li>
    <li class="page-item"><a class="page-link" href="#">2</a></li>
    <li class="page-item"><a class="page-link" href="#">3</a></li>-->
    <li class="page-item">
      <!--<a class="page-link" href="#">Next</a>-->
      <button class="page-link" (click)="next()">Next</button>
    </li>
  </ul>
</nav>
<!-- Edit Form -->
<div class="popup-container" *ngIf="showEditForm">
  <div class="popup-1">
    <h2>Edit Client</h2>
    <div class="form-container">
      <div class="left-form">
        <div class="form-group">
          <label for="firstname">First Name:</label>
          <input type="text" id="firstname" name="firstname" [(ngModel)]="editedClient.firstname" class="form-control">
        </div>
        <div class="form-group">
          <label for="login">Login:</label>
          <input type="text" id="login" name="login" [(ngModel)]="editedClient.login" class="form-control">
        </div>
        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" id="email" name="email" [(ngModel)]="editedClient.email" class="form-control">
        </div>
        <div class="form-group">
          <label for="phone">Phone:</label>
          <input type="text" id="phone" name="phone" [(ngModel)]="editedClient.phone" class="form-control">
        </div>
        <div class="form-group">
          <label for="codeVerif">Code Verification:</label>
          <input type="text" id="codeVerif" name="codeVerif" [(ngModel)]="editedClient.codeVerif" class="form-control">
        </div>
        <div class="form-group">
          <label for="BlackList">Black List:</label>
          <select id="BlackList" name="BlackList" [(ngModel)]="editedClient.BlackList" class="form-control">
            <option value="Blocked">Blocked</option>
            <option value="Not Blocked" selected>Not Blocked</option>
          </select>
        </div>
        <div class="form-group">
          <label for="createdAt">created At:</label>
          <input type="text" id="createdAt" name="createdAt" [(ngModel)]="editedClient.createdAt" class="form-control">
        </div>
      </div>
      <div class="right-form">
        <div class="form-group">
          <label for="lastname">Last Name:</label>
          <input type="text" id="lastname" name="lastname" [(ngModel)]="editedClient.lastname" class="form-control">
        </div>
        <div class="form-group">
          <label for="password">Password:</label>
          <input type="password" id="password" name="password" [(ngModel)]="editedClient.password" class="form-control">
        </div>
        <div class="form-group">
          <label for="image">Image:</label>
          <input type="text" id="image" name="image" [(ngModel)]="editedClient.image" class="form-control">
        </div>
        <div class="form-group">
          <label for="loginType">Login Type:</label>
          <input type="text" id="loginType" name="loginType" [(ngModel)]="editedClient.loginType" class="form-control">
        </div>
        <div class="form-group">
          <label for="etatVerif">Verification Status:</label>
          <input type="text" id="etatVerif" name="etatVerif" [(ngModel)]="editedClient.etatVerif" class="form-control">
        </div>
        <div class="form-group">
          <label for="Connection Type">Connection Type:</label>
          <input type="text" id="Connection Type" name="Connection Type" [(ngModel)]="editedClient.loginType" class="form-control">
        </div>
        <div class="form-group">
          <label for="updatedAt">Updated At:</label>
          <input type="text" id="updatedAt" name="updatedAt" [(ngModel)]="editedClient.updatedAt" class="form-control">
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col"> 
        <button type="submit" class="btn btn-primary" (click)="successPopup()">Save</button>
      </div>
      <div class="col">
        <button type="button" class="btn btn-secondary ms-3" (click)="fermerPopup()">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="popup-container" *ngIf="showEditSuccessPopup">
  <div class="popup">
    <h2>Client Edited!</h2>
    <button type="button" class="btn btn-primary" (click)="fermerSuccessPopup()">Dismiss!</button>
  </div>
</div>
<div class="popup-container" *ngIf="showDeletePopup" (click)="closePopupDelete($event)">
  <div class="popup"  >
    <h2>Delete Client</h2>
    <p>Are you sure you want to delete this client?</p>
    <button type="button" class="btn btn-primary" (click)="deleteClient(showDeletePopup)">Yes, Delete</button>
    <button type="button" class="btn btn-secondary ms-3" (click)="cancelDelete()">Cancel</button>
  </div>
</div>