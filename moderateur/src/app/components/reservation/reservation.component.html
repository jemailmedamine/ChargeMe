<!-- Reservation table -->
<h1>Reservation</h1>
<div class="from-outline mt-3">
  <form>
    <button class="xbtn ms-3" (click)="ongoing()" style="border: none; background-color: transparent;">
      <span style="height: 36px;"class="badge d-flex align-items-center p-1 pe-2 text-warning-emphasis bg-warning-subtle border border-warning-subtle rounded-pill">
        Ongoing
        <span class="vr mx-2"></span>
        <a href=""><svg class="bi" width="16" height="16"><use xlink:href="#x-circle-fill"></use></svg></a>
      </span>
    </button>
    <button class="xbtn" (click)="cancelledlist()" style="border: none; background-color: transparent;">
      <span style="height: 36px; " class="badge d-flex align-items-center p-1 pe-2 text-danger-emphasis bg-danger-subtle border border-danger-subtle rounded-pill">
        Cancelled
        <span class="vr mx-2"></span> 
        <a href=""><svg class="bi" width="16" height="16"><use xlink:href="#x-circle-fill"></use></svg></a>
      </span> 
    </button>
    <button class="xbtn ms-3" (click)="finishedlist()" style="border: none; background-color: transparent;">
      <span style="height: 36px;"class="badge d-flex align-items-center p-1 pe-2 text-success-emphasis bg-success-subtle border border-success-subtle rounded-pill">
        Finished
        <span class="vr mx-2"></span>
        <a href=""><svg class="bi" width="16" height="16"><use xlink:href="#x-circle-fill"></use></svg></a>
      </span>
    </button>
  </form>
</div>

<!-- Table headers -->
<table class="table table-striped table-hover mt-3">
  <thead>
    <tr>
      <th>Photo</th>
      <th>Nom</th> 
      <th>Prénom</th>
      <th>Numéro de téléphone</th>
      <th>Date de réservation</th>
      <th>Period</th>
      <th>Born</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <!-- Loop through listreserv.listeResev to display reservations -->
    <tr *ngFor="let reservation of listreserv.listeResev">
      <!-- Display reservation details in each row -->
      <td><img [src]="img1" alt="Photo de l'utilisateur" height="50"></td>
      <td>{{ reservation.firstname }}</td>
      <td>{{ reservation.lastname }}</td>
      <td>{{ reservation.phone }}</td>
      <td>{{ subtractOneHour(reservation.dateReservation) | date:'yyyy-MM-dd HH:mm:ss' }}</td>
      <td>{{ reservation.period }}</td>
      <td>{{ reservation.Born_name }}</td>
      <!-- Actions buttons -->
      <td>
        <!-- <button class="btn fa fa-trash" (click)="supprimerReservation(reservation)"></button> -->
        <ng-container *ngIf="reservation.etat=='EnCour'; ">
        <button class="btn fa fa-pen" (click)="modifierReservation(reservation)"></button>
      </ng-container>
        <ng-container *ngIf="reservation.etat!='EnCour'; ">
          <button class="btn btn-primary ms-3" (click)="undo(reservation)">Undo</button>
        </ng-container>
        
      </td>
    </tr>
  </tbody>
</table>

<!-- Pagination -->
<nav aria-label="Page navigation example">
  <ul class="pagination justify-content-end">
    <li class="page-item">
      <button class="page-link" (click)="Previous()">Previous</button>
    </li>
    <li class="page-item">
      <button class="page-link" (click)="next()">Next</button>
    </li>
  </ul>
</nav>

<!-- Popup de modification -->
<div class="modal" *ngIf="showPopup">
  <div class="modal-content">
    <span class="close" (click)="fermerPopup()">&times;</span>
    <h2>Modifier la réservation</h2> 
    <form>
      <!-- Ajoutez les champs du formulaire ici -->
      <label for="nom">Nom:</label>
      <input type="text" id="nom" name="nom" [(ngModel)]="reservationModifiee.nom">
      <!-- Ajoutez d'autres champs du formulaire pour les autres propriétés de la réservation -->
      <button type="submit" class="btn btn-success">Enregistrer</button>
    </form>
  </div>
</div>
<div class="popup-container" *ngIf="statePopup" (click)="closePopup($event)">
  <div class="popup">
    <button type="button" class="close-btn" (click)="closePopup($event)">X</button> <!-- Add this button -->
    <h2 class="text-center">Reservation State</h2>
    <div class="mid">
      <button type="button" class="btn btn-primary" (click)="finished()">Finished</button>
      <button type="button" class="btn btn-secondary ms-5" (click)="cancelled()">Cancelled</button>
    </div>
  </div>
</div>
